---
title: 实现移动设备Ritina屏下1px
date: 2017-04-14 14:38:07
layout: post
comments: true
categories: css
tags: [css]
keywords: css,像素,retina,高清屏
description: 手机高清屏下1像素问题
---
## 背景

大家应该都知道在ios Ritina高清屏下写1px的边框,实际上是2px,其实情况是devicePixelRatio=2 的时候显示2px, 6P这种的devicePixelRatio=3,实际效果是3px。
解决这种问题的方法很多:
1、ios8以上的支持0.5px
2、淘宝的 vieweport + REM 方法实现, 详细解决方案移驾[淘宝m站](m.taobao.com)查看
3、box-shadow、border-image、background-image,详情请自行google
4、transform + after伪类,利用伪类after实现border为1px,在devicePixelRatio == 2时利用transform:scale(.5)缩一半

## 实现代码 
   transform + after
### html

    ```html
    <ul class="hair-lines">
        <li>
            <div class="hair-line border-top">上边框</div>
        </li>
        <li>
            <div class="hair-line border-right">右边框</div>
        </li>
        <li>
            <div class="hair-line border-bottom">下边框</div>
        </li>
        <li>
            <div class="hair-line border-left">左边框</div>
        </li>
        <li>
            <div class="hair-line border-full">四条边</div>
        </li>
        <li>
            <div class="hair-line border-circle">圆角</div>
        </li>
    </ul>
    ```
### css

    ```css
            .hair-lines li{
                height: 40px;
                line-height: 40px;
                margin: 10px;
                padding: 10px;
                text-align: center;
                list-style: none;
            }
            .hair-line{
                position: relative;
            }
            .hair-line:after{
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                transform-origin: 0 0;
                pointer-events: none;
            }
            .border-top:after{
                border-top: 1px solid #d5d5d5;
            }
            .border-right:after{
                border-right: 1px solid #d5d5d5;
            }
            .border-bottom:after{
                border-bottom: 1px solid #d5d5d5;
            }
            .border-left:after{
                border-left: 1px solid #d5d5d5;
            }
            .border-full:after{
                border: 1px solid #d5d5d5;
            }
            .border-circle:after{
                border: 1px solid #d5d5d5;
                height: 200px;
                width: 200px;
                border-radius: 50%;
            }
            @media only screen and (-webkit-min-device-pixel-ratio: 2){
                .hair-line:after {
                    right: -100%;
                    bottom: -100%;
                    transform: scale(0.5);
                }
            }
    ```
## 效果
<ul class="hair-lines"><li><div class="hair-line border-top">上边框</div></li><li><div class="hair-line border-right">右边框</div></li><li><div class="hair-line border-bottom">下边框</div></li><li><div class="hair-line border-left">左边框</div></li><li><div class="hair-line border-full">四条边</div></li><li><div class="hair-line border-circle">圆角</div></li></ul>
<style type="text/css">
        .hair-lines{
            width: 320px;
            background:#fff;
            padding-bottom: 100px;
        }
        .hair-lines li{
            height: 40px;
            line-height: 40px;
            margin: 10px;
            padding: 10px;
            text-align: center;
            list-style: none;
        }
        .hair-lines li:before{
            display:none!important;
        }
        .hair-line{
            position: relative;
        }
        .hair-line:after{
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            transform-origin: 0 0;
            pointer-events: none;
        }
        .border-top:after{
            border-top: 1px solid #d5d5d5;
        }
        .border-right:after{
            border-right: 1px solid #d5d5d5;
        }
        .border-bottom:after{
            border-bottom: 1px solid #d5d5d5;
        }
        .border-left:after{
            border-left: 1px solid #d5d5d5;
        }
        .border-full:after{
            border: 1px solid #d5d5d5;
        }
        .border-circle:after{
            border: 1px solid #d5d5d5;
            height: 200px;
            width: 200px;
            border-radius: 50%;
        }
        @media only screen and (-webkit-min-device-pixel-ratio: 2){
            .hair-line:after {
                right: -100%;
                bottom: -100%;
                transform: scale(0.5);
            }
        }
</style>